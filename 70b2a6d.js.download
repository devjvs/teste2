!function(){try{var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new t.Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="87d9fc21-7bfc-422e-b3b8-3ab7f8c5eb3e",t._sentryDebugIdIdentifier="sentry-dbid-87d9fc21-7bfc-422e-b3b8-3ab7f8c5eb3e")}catch(t){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"adc824a88acfca7c809986bdbc5f5b4c56b3b966"},(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1068:function(t,e,n){"use strict";var o=n(14),r=n(327).charAt,c=n(83),l=n(103),d=n(65);o({target:"String",proto:!0,forced:!0},{at:function(t){var e=d(c(this)),n=e.length,o=l(t),f=o>=0?o:n+o;return f<0||f>=n?void 0:r(e,f)}})},1070:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return f}));var o="goal-current-filter-state",r="percent",c="fire",l="team",d="goal-page-icon-selected",f=[{name:c,isSelected:!1,isVisible:!0,message:"Incidência de assunto "},{name:l,isSelected:!1,isVisible:!0,message:"Autor"},{name:"hour-time",isSelected:!1,isVisible:!1,message:"Tempo estimado"},{name:r,isSelected:!1,isVisible:!0,message:"Progresso"}]},1186:function(t,e,n){"use strict";var o=n(23),r=n(2),c=(n(22),n(20),n(52),n(57),n(19),n(134),n(318),n(49),n(38),n(62),n(44),n(24),n(18),n(25),n(26),n(5),n(53),n(21),n(39),n(35),n(73),n(32),n(1068),n(17),n(1036)),l=n(1070),d=n(1390);function f(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,a){if(t){if("string"==typeof t)return h(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?h(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,c=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw c}}}}function h(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,n=Array(a);e<a;e++)n[e]=t[e];return n}function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m=100,S={goal:{add:function(t,filter,e){return e.goals=(e.goals||[]).concat(filter.id),e},del:function(t,filter,e){return e.goals=(e.goals||[]).filter((function(t){return t!==filter.id})),e},replace:function(t,filter,e){return e.goals=[filter.id],e}},author:{add:function(t,filter,e){return e.authors=(e.authors||[]).concat(filter.id),e},del:function(t,filter,e){return e.authors=(e.authors||[]).filter((function(t){return t!==filter.id})),e},replace:function(t,filter,e){return e.authors=[filter.id],e}},cast_shelves:{add:function(t,filter,e){return e.castShelves=(e.castShelves||[]).concat(filter.id),e},del:function(t,filter,e){return e.castShelves=(e.castShelves||[]).filter((function(t){return t!==filter.id})),e},replace:function(t,filter,e){return e.castShelves=[filter.id],e}},classification:{add:function(t,filter,e){return e.classifications=y(y({},e.classifications),{},Object(r.a)({},t,(e.classifications[t]||[]).concat(filter.id))),e},del:function(t,filter,e){return e.classifications=y(y({},e.classifications),{},Object(r.a)({},t,(e.classifications[t]||[]).filter((function(t){return t!==filter.id})))),0===e.classifications[t].length&&delete e.classifications[t],e},replace:function(t,filter,e){return e.classifications=y(y({},e.classifications),{},Object(r.a)({},t,[filter.id])),e}},type_entities:{add:function(t,filter,e){return e.typeEntities=(e.typeEntities||[]).concat(filter.id),e},del:function(t,filter,e){return e.typeEntities=(e.typeEntities||[]).filter((function(t){return t!==filter.id})),e},replace:function(t,filter,e){return e.typeEntities=[filter.id],e}}},x={name:"SearchFilterContainer",components:{ControllableSearchFilter:d.a},props:{ignoreShelfIds:{type:Array,default:function(){return[]}},query:{type:String,default:""},queryGoalPage:{type:String,default:""},courseType:{type:String,default:""},filters:{type:Array,required:!0},filterStateStorageKey:{type:String,default:null},openSectionsStorageKey:{type:String,default:null},onlyHasAccess:{type:Boolean,default:!1},openSectionsIds:{type:Array,default:function(){return[]}},selectedClassificationId:{type:String,default:""},selectedContentType:{type:String,default:""},selectedEntities:{type:Array,default:function(){return[]}},isGoalPage:{type:Boolean,default:!1},currentLdiCourseType:{type:String,default:""}},data:function(){return{openClassificationSections:[],sections:[],selecteds:[],stack:[],state:{typeEntities:[],authors:[],classifications:{},goals:[],castShelves:[]},onHoldFilter:{},filterHash:null,disableOptions:!1,appliedSelecteds:!1}},computed:{tags:function(){return this.onlyHasAccess?[{id:c.a.FILTERS.TYPE_ONLY_HAS_ACCESS,label:"Somente meus conteúdos"}]:[]},shelfSection:function(){return this.sections.find((function(section){return section.is_shelf}))},currentSelectedShelves:function(){var t,e,n,o=this;return null!==(t=null===(e=this.selecteds)||void 0===e||null===(n=e.find((function(section){return section.id===o.shelfSection.id})))||void 0===n?void 0:n.options)&&void 0!==t?t:[]}},watch:{state:{handler:function(){this.updateFiltersLocalStorage(),this.$emit("reset-pagination")},deep:!0},sections:{handler:function(){this.updateFiltersLocalStorage()},deep:!0},courseType:function(){this.fetchAndUpdateAccordingToState()},onlyHasAccess:function(){this.fetchAndUpdateAccordingToState()},query:function(){this.fetchAndUpdateAccordingToState()},currentLdiCourseType:function(){this.fetchAndUpdateAccordingToState()},queryGoalPage:function(text){text.trim().length>0&&text.trim().length<3||this.fetchAndUpdateAccordingToState()}},errorCaptured:function(t){return console.error("limpando filtros devido a um erro: ".concat(t)),this.handleClearFilters(),!1},mounted:function(){var t=this;this.emitUpdateHooks(),this.loadLocalFilterState(),this.fetchInitialSelectedSections(),this.updateSectionsBasedOnFilters(this.filters),this.loadLocalOpenSections(),this.$nextTick((function(){t.fetchAndUpdateAccordingToState()}))},methods:{applySelected:function(){var t=this;this.applySelectedClassificationId(),this.applySelectedContentType(),this.applySelectedEntities(),this.$nextTick((function(){t.fetchAndUpdateAccordingToState()}))},emitUpdateHooks:function(){var t=this;this.$emit("update-hooks",{getCurrentSelectedShelves:function(){return t.currentSelectedShelves},getCurrentFilterState:function(){return y({},t.state)},getCurrentSelectedsProperty:function(){return t.selecteds},addShelfFilter:this.hookAddShelfFilter})},fetchAndUpdateAccordingToState:function(){var t=this,e=Object.keys(this.onHoldFilter);if((null==e?void 0:e.length)>0){var n,r=f(e);try{for(r.s();!(n=r.n()).done;){var c,l=n.value;this.state.classifications[l]=(null===(c=this.state.classifications[l])||void 0===c?void 0:c.length)>0?[].concat(Object(o.a)(this.state.classifications[l]),Object(o.a)(this.onHoldFilter[l])):Object(o.a)(this.onHoldFilter[l])}}catch(t){r.e(t)}finally{r.f()}this.onHoldFilter={}}var d={query:this.query,filters:y(y({},this.state),{},{courseType:this.courseType,onlyHasAccess:this.onlyHasAccess}),withAvailableFilters:this.sections.map((function(section){return t.updateSection(section.id,y(y({},section),{},{page:1,isLoading:!0})),{id:section.id,type:section.type,query:section.text,pagination:{page:1,per_page:m}}}))};this.$emit("fetch-many",d,(function(e,n){var o,r=e.filters;t.updateSectionsBasedOnFilters(r),t.disableOptions=!1,(t.selectedClassificationId||t.selectedContentType||(null===(o=t.selectedEntities)||void 0===o?void 0:o.length)>0)&&!t.appliedSelecteds&&n&&(t.appliedSelecteds=!0,t.applySelected())}))},loadLocalFilterState:function(){if(this.filterStateStorageKey&&this.filterStateStorageKey!==l.c){var t=localStorage.getItem(this.filterStateStorageKey);if(t){var e=JSON.parse(t),n=e.selecteds,o=e.state,r=e.sections,c=e.stack,d=e.onlyHasAccess;if(this.filterHash=function(input){var t=0;if(0===input.length)return t;for(var i=0;i<input.length;i++)t=(t<<5)-t+input.charCodeAt(i),t&=t;return t}(JSON.stringify(this.filters)),n&&n.length>0)return this.state=o,this.selecteds=n,this.sections=r,this.stack=c,void this.$emit("update-only-has-access",d)}this.$emit("update-only-has-access",void 0)}},loadLocalOpenSections:function(){if(this.openSectionsIds.length)this.openClassificationSections=this.openSectionsIds;else if(this.openSectionsStorageKey){var t=localStorage.getItem(this.openSectionsStorageKey);t&&(this.openClassificationSections=JSON.parse(t))}},fetchInitialSelectedSections:function(){var t,e=this;null===(t=this.selecteds)||void 0===t||t.forEach((function(t){if(t.id!==c.a.FILTERS.TYPE_ENTITIES){var section=e.getSection(t.id);section.isLoading=!0,section.page=1,e.updateSection(section.id,section);var n={query:e.query,filters:y(y({},(null==section?void 0:section.state)||{}),{},{courseType:e.courseType,onlyHasAccess:e.onlyHasAccess}),pagination:{page:1,perPage:0},withAvailableFilters:[{id:t.id,type:section.type,query:section.text,pagination:{page:section.page,per_page:m}}]};e.$emit("fetch-one",n,(function(n){var o,r,c,l,d,f=n.filters,h=void 0===f?[]:f;section.isLoading=!1,section.isLoadingMore=!1,section.options=null!==(o=null==h||null===(r=h.at(0))||void 0===r?void 0:r.options)&&void 0!==o?o:[],section.total=null!==(c=null==h||null===(l=h.at(0))||void 0===l||null===(d=l.pagination)||void 0===d?void 0:d.value)&&void 0!==c?c:0,e.updateSection(t.id,section)}))}}))},updateSectionsBasedOnFilters:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];this.filters.forEach((function(filter,r){var c,l,d,f,h,v,m,S,x=e.find((function(t){return t.id===filter.id}));if(!x&&null!==(c=t.sections[r])&&void 0!==c&&null!==(l=c.options)&&void 0!==l&&l.length)return n.push(t.sections[r]);var section=t.sections[r]||{};n.push(y(y(y({},filter),section),{},{isLoading:!1,isLoadingMore:!1,options:1===section.page?null!==(d=null==x?void 0:x.options)&&void 0!==d?d:[]:[].concat(Object(o.a)(null!==(f=null==section?void 0:section.options)&&void 0!==f?f:[]),Object(o.a)(null!==(h=null==x?void 0:x.options)&&void 0!==h?h:[])),total:null!==(v=null==x||null===(m=x.pagination)||void 0===m?void 0:m.value)&&void 0!==v?v:0,page:null!==(S=section.page)&&void 0!==S?S:1,state:null}))})),this.sections=n},hookAddShelfFilter:function(t){var e=this.shelfSection.id,option=this.shelfSection.options.find((function(option){return(null==option?void 0:option.id)===t}))||t||{};this.handleAddFilter(y(y({},option),{},{value:option.id,display:!0,parent:e}),e,{forceReplace:!0})},handleAddFilter:function(filter,t){var e=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).forceReplace;this.addFilter(filter,t,{forceReplace:e}),this.fetchAndUpdateAccordingToState()},addFilter:function(filter,t){var e,n,r=this,c=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).forceReplace;(null===(e=this.selecteds)||void 0===e?void 0:e.find((function(e){return e.id===t})))?this.selecteds=null===(n=this.selecteds)||void 0===n?void 0:n.map((function(e){if(e.id!==t)return e;if(c)return y(y({},e),{},{options:[filter]});var n=e.options.filter((function(t){return!r.ignoreShelfIds.includes(t.id)&&t.id!==filter.id}));return y(y({},e),{},{options:[].concat(Object(o.a)(n),[filter])})})):this.selecteds=[].concat(Object(o.a)(this.selecteds),[{id:t,options:[filter],state:y({},this.state)}]);if(this.sections=this.sections.map((function(section){var t,e=null===(t=r.selecteds)||void 0===t?void 0:t.findIndex((function(t){return t.id===section.id}));return y(y({},section),{},{state:e>-1?r.selecteds[e].state:null,index:e})})),!this.ignoreShelfIds.includes(filter.id)){var l;filter.type=(null===(l=this.filters.find((function(e){return e.id===t})))||void 0===l?void 0:l.type)||"classification";var d=c?"replace":"add";this.state=this.buildFilterState(t,filter,d,this.state);var f={sectionId:t,filter:filter};this.stack=c?[f]:[].concat(Object(o.a)(this.stack),[f])}},handleRemoveFilter:function(filter,t){var e,n,r=this;if(!this.disableOptions){this.disableOptions=!0;var c=Object(o.a)(this.stack),l=Object(o.a)(this.selecteds),d=Object(o.a)(this.sections),f=y({},this.state),h=y({},this.onHoldFilter),v=null===(e=l)||void 0===e?void 0:e.at(0);if((null==v?void 0:v.id)===t&&1===(null==v||null===(n=v.options)||void 0===n?void 0:n.length))return this.sections=d.map((function(section){var t=l.findIndex((function(t){return t.id===section.id})),e=t>0?r.buildFilterState(section.id,filter,"del",l[t-1].state):null;return y(y({},section),{},{state:e,index:t>0?t-1:t})})),this.state=this.buildFilterState(t,filter,"del",f),this.stack=c.filter((function(e){return e.sectionId!==t})),this.selecteds=l.filter((function(e){return e.id!==t})),this.fetchInitialSelectedSections(),void this.fetchAndUpdateAccordingToState();for(var m=0,S=Object.keys(h);m<S.length;m++){var x=S[m];if(x===t){if(1===h[x].length){delete h[x];break}h[x]=h[x].filter((function(t){return t!==filter.id}))}}for(var O=l.findIndex((function(e){return e.id===t})),w=c.findIndex((function(e){var n;return(null==e?void 0:e.sectionId)===t&&(null==e||null===(n=e.filter)||void 0===n?void 0:n.id)===filter.id})),C=function(i){var t,e=c[i],n=l.findIndex((function(t){return t.id===(null==e?void 0:e.sectionId)}));if((null==e||null===(t=e.filter)||void 0===t?void 0:t.id)!==filter.id&&O>=n)return 1;c=c.filter((function(t,e){return e!==i})),f=r.buildFilterState(null==e?void 0:e.sectionId,null==e?void 0:e.filter,"del",f),d=d.map((function(section){var t=l.findIndex((function(t){return t.id===section.id}));return y(y({},section),{},{state:t>-1?l[t].state:null,index:t})})),l=(l=l.map((function(t){return t.id!==(null==e?void 0:e.sectionId)?t:y(y({},t),{},{options:t.options.filter((function(t){var n;return t.id!==(null==e||null===(n=e.filter)||void 0===n?void 0:n.id)}))})}))).filter((function(t){return t.options.length>0}))},i=c.length-1;i>=w;i--)C(i);this.stack=c,this.selecteds=l,this.sections=d,this.state=f,this.onHoldFilter=h,this.fetchAndUpdateAccordingToState()}},buildFilterState:function(t,filter){var e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"add",o=arguments.length>3?arguments[3]:void 0,r=S[null==filter?void 0:filter.type]||S[t]||S.classification;return(null==r||null===(e=r[n])||void 0===e?void 0:e.call(r,t,filter,null!=o?o:y({},this.state)))||y({},this.state)},handleClearFilters:function(){var t=this;this.onlyHasAccess&&this.$emit("update-only-has-access",!1),this.stack=[],this.selecteds=[],this.sections=this.sections.map((function(section){return y(y({},section),{},{isLoading:!1,isLoadingMore:!1,state:null,index:-1})})),this.state={classifications:{},goals:[],authors:[],typeEntities:[],castShelves:[]},this.$nextTick((function(){t.fetchAndUpdateAccordingToState()}))},handleChangeTextSection:function(t,text){var e=this,section=this.getSection(t);if(section.text!==text&&!section.isLoading){section.isLoading=!0,section.text=text,section.page=1,this.updateSection(t,section);var n=(null==section?void 0:section.state)||this.state;n.classifications[t]&&(this.onHoldFilter[t]=Object(o.a)(n.classifications[t]),delete n.classifications[t]);var r={query:this.query,filters:y(y({},n),{},{courseType:this.courseType,onlyHasAccess:this.onlyHasAccess}),withAvailableFilters:[{id:section.id,type:section.type,query:text,pagination:{page:1,per_page:m}}]};this.$emit("fetch-one",r,(function(t){var n=t.filters;e.updateSectionsBasedOnFilters(n)}))}},handleToggleSection:function(t,e){e&&this.openClassificationSections.includes(t)||(this.openClassificationSections=e?[].concat(Object(o.a)(this.openClassificationSections),[t]):this.openClassificationSections.filter((function(e){return e!==t})),this.openSectionsStorageKey&&localStorage.setItem(this.openSectionsStorageKey,JSON.stringify(this.openClassificationSections)))},handleGroupReachedBottom:function(t){var e=this,section=this.getSection(t);if(!(section.options.length>=section.total||section.isLoadingMore)){section.isLoadingMore=!0,section.page++,this.updateSection(t,section);var n={query:this.query,filters:y(y({},(null==section?void 0:section.state)||this.state),{},{courseType:this.courseType,onlyHasAccess:this.onlyHasAccess}),withAvailableFilters:[{id:t,text:section.text,type:section.type,pagination:{page:section.page,per_page:m}}]};this.$emit("fetch-one",n,(function(t){var n=t.filters;e.updateSectionsBasedOnFilters(n)}))}},updateSection:function(t,section){this.sections=this.sections.map((function(e){return e.id===t?y(y({},section),{},{isLoading:!1}):y(y({},e),{},{isLoading:!1})}))},getSection:function(t){return this.sections.find((function(section){return section.id===t}))},updateFiltersLocalStorage:function(){this.filterStateStorageKey&&localStorage.setItem(this.filterStateStorageKey,JSON.stringify({onlyHasAccess:this.onlyHasAccess,selecteds:this.selecteds,stack:this.stack,sections:this.sections,state:this.state,filterHash:this.filterHash}))},handleRemoveTag:function(t){t.id===c.a.FILTERS.TYPE_ONLY_HAS_ACCESS&&this.$emit("update-only-has-access",!1)},applySelectedClassificationId:function(){var t,e=this,section=this.sections.find((function(section){return"classification"===section.type})),option=null==section||null===(t=section.options)||void 0===t?void 0:t.find((function(option){return option.id===e.selectedClassificationId}));option&&this.addFilter({id:option.id,value:option.id,display:!0,label:option.label,parent:section.id},section.id,{forceReplace:!0})},applySelectedContentType:function(){var t,e=this,section=this.sections.find((function(section){return"type_entities"===section.type})),option=null==section||null===(t=section.options)||void 0===t?void 0:t.find((function(option){return option.id===e.selectedContentType}));option&&this.addFilter({id:option.id,value:option.id,display:!0,label:option.label,parent:section.id},"type_entities",{forceReplace:!0})},applySelectedEntities:function(){var t,e=this,section=this.sections.find((function(section){return"type_entities"===section.type}));section&&section.options&&(null===(t=section.options)||void 0===t||t.forEach((function(option){var t;null!==(t=e.selectedEntities)&&void 0!==t&&t.includes(option.id)&&e.addFilter({id:option.id,value:option.id,display:!0,label:option.label,parent:section.id},"type_entities",{forceReplace:!1})})))}}},O=x,w=n(12),component=Object(w.a)(O,(function(){var t=this;return(0,t._self._c)("controllable-search-filter",{attrs:{sections:t.sections,"selected-options":t.selecteds,tags:t.tags,"forced-open-section-ids":t.openClassificationSections,disabled:t.disableOptions,"is-goal-page":t.isGoalPage},on:{"remove-tag":t.handleRemoveTag,"add-filter":t.handleAddFilter,"clear-filters":t.handleClearFilters,"remove-filter":t.handleRemoveFilter,"toggle-section":t.handleToggleSection,"on-change-text-section":t.handleChangeTextSection,"group-reached-bottom":t.handleGroupReachedBottom}},[t._t("default")],2)}),[],!1,null,null,null);e.a=component.exports},1390:function(t,e,n){"use strict";n(49),n(24);var o=n(2),r=n(16),c=(n(19),n(20),n(134),n(38),n(25),n(26),n(18),n(5),n(53),n(17),n(108),n(21),n(39),n(13)),l={name:"Loading",components:{CIcon:c.r},props:{isLoading:{type:Boolean,default:!1},isCentralized:{type:Boolean,default:!1}}},d=(n(1614),n(12)),f=Object(d.a)(l,(function(){var t=this,e=t._self._c;return t.isLoading?e("div",{staticClass:"flex items-center justify-center w-full",class:{centralized:t.isCentralized}},[e("c-icon",{staticClass:"ui-spinner ui-animation-spin ui-animation-3s ui-animation-linear ui-animation-infinite",attrs:{name:"loader-2",color:"var(--c-color-gray-200)",width:"44"}})],1):t._e()}),[],!1,null,"4d3f7f90",null).exports,h={name:"FilterGroup",components:{CSearchBar:c.K,CIcon:c.r,CCheckbox:c.j,Loading:f},props:{title:{type:String,required:!0},options:{type:Array,default:function(){return[]}},id:{type:String,required:!0},selected:{type:Array,default:function(){return[]}},isSearchable:{type:Boolean,default:!0},shouldForceOpen:{type:Boolean,default:!1},text:{type:String,default:""},isLoading:{type:Boolean,default:!1},isLoadingMore:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},isGoalPage:{type:Boolean,default:!1}},data:function(){return{searchText:"",isLoadingOptions:!1,isLoadingMoreOptions:!1,arrowName:"arrow-drop-down",accordionStatus:!1,searchOptions:[]}},computed:{shouldShowSearchBar:function(){return this.isSearchable},shouldShowEmptyOptions:function(){return 0===this.searchOptions.length&&!this.isLoadingOptions}},watch:{accordionStatus:{handler:function(t){this.$emit("toggle-section",t)}},shouldForceOpen:{handler:function(t){t&&(this.accordionStatus=!0)}},isLoading:{handler:function(t){this.isLoadingOptions=t}},isLoadingMore:{handler:function(t){this.isLoadingMoreOptions=t}},options:{handler:function(t){var e=this;this.searchOptions=t.map((function(option){return{label:option.label,id:(null==option?void 0:option.id)||option.value,value:(null==option?void 0:option.id)||option.value,display:!0,parent:null==e?void 0:e.id}}))},deep:!0,immediate:!0}},mounted:function(){(this.selected.length>0||this.shouldForceOpen)&&(this.accordionStatus=!0),this.searchText=this.text,this.$refs["accordion-options"].addEventListener("scroll",this.handleSectionScroll)},beforeDestroy:function(){this.$refs["accordion-options"].removeEventListener("scroll",this.handleSectionScroll)},methods:{includes:function(t){return Boolean(this.selected.find((function(e){return"object"===Object(r.a)(e)?(null==e?void 0:e.id)===t||e.value===t:e===t})))},getCheckboxAriaLabel:function(filter){return this.includes(null==filter?void 0:filter.id)?"Remover filtro ".concat(filter.label):"Adicionar filtro ".concat(filter.label)},handleFilter:function(){var t=this;this.searchOptions=this.options.map((function(option){return!0===new RegExp(t.searchText,"i").test(option.label)?option.display=!0:option.display=!1,option}))},handleFilterAccordion:function(){this.arrowName="arrow-drop-down"===this.arrowName?"arrow-drop-up":"arrow-drop-down",this.accordionStatus=!this.accordionStatus},handleCheckOption:function(filter){this.includes(null==filter?void 0:filter.id)?this.$emit("remove-filter",filter):this.$emit("add-filter",filter)},handleSectionScroll:function(){this.accordionStatus&&(this.$refs["accordion-options"].scrollTop>=this.$refs["accordion-options"].scrollHeight-this.$refs["accordion-options"].offsetHeight&&this.$emit("group-reached-bottom"))}}},v=(n(1616),Object(d.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-3"},[e("div",{staticClass:"cursor-pointer",on:{click:t.handleFilterAccordion}},[e("div",{staticClass:"controlled-filter-title flex flex-row items-center c-text-b1 c-text-gray-400"},[e("p",{staticClass:"flex-1"},[t._v("\n        "+t._s(t.title)+"\n      ")]),t._v(" "),t.selected.length>0?e("div",{staticClass:"flex items-center justify-center h-6 w-6 c-bg-white rounded-full"},[e("span",{staticClass:"selected-options-counter-text c-text-gray-400"},[t._v("\n          "+t._s(t.selected.length)+"\n        ")])]):t._e(),t._v(" "),e("c-icon",{staticClass:"arrow",attrs:{name:t.arrowName,color:"var(--c-color-gray-400)"}})],1)]),t._v(" "),e("div",{staticClass:"accordion-content",class:t.accordionStatus?"open":"closed"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isGoalPage,expression:"!isGoalPage"}]},[t.shouldShowSearchBar?e("c-search-bar",{staticClass:"mt-2 mb-3",attrs:{size:"sm",placeholder:"Digite sua busca",debounce:500},on:{input:function(text){return t.$emit("on-change",text)}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}}):t._e()],1),t._v(" "),e("div",{ref:"accordion-options",staticClass:"accordion-options relative"},[t.shouldShowEmptyOptions?e("div",{staticClass:"empty-options"},[e("p",{staticClass:"c-text-gray-300 c-text-b3 text-center"},[t._v("\n          Não existe uma combinação de filtros compatível com a sua seleção atual\n        ")])]):t._e(),t._v(" "),e("loading",{attrs:{"is-loading":t.isLoadingOptions,"is-centralized":t.searchOptions.length>0}}),t._v(" "),t._l(t.searchOptions,(function(option,i){return e("c-checkbox",{directives:[{name:"show",rawName:"v-show",value:option.display,expression:"option.display"}],key:i,staticClass:"ui-py-2 border-b c-border-gray-200 checkbox-option-accents",attrs:{disabled:t.isLoadingOptions||t.disabled,checked:t.includes(option.id),label:option.label,"aria-label":t.getCheckboxAriaLabel(option)},on:{change:function(e){return t.handleCheckOption(option)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleCheckOption(option)}}})})),t._v(" "),e("loading",{attrs:{"is-loading":t.isLoadingMoreOptions}})],2)])])}),[],!1,null,"574768b4",null).exports),y={name:"AppliedFilters",components:{CIcon:c.r,CLink:c.t,CPill:c.G},props:{options:{type:Array,required:!0},tags:{type:Array,default:function(){return[]}}},data:function(){return{searchText:"",arrowName:"arrow-drop-down",accordionStatus:!0,catalogsCheckbox:[],maxHeight:"0"}},computed:{hasTags:function(){return this.tags.length>0||this.options.length>0}},watch:{options:{handler:function(){this.updateMaxHeight()},deep:!0},tags:{handler:function(){this.updateMaxHeight()},deep:!0}},mounted:function(){this.updateMaxHeight()},methods:{handleFilterAccordion:function(){this.arrowName="arrow-drop-down"===this.arrowName?"arrow-drop-up":"arrow-drop-down",this.toggleAccordion()},clearFilters:function(){this.$emit("clear-filters")},toggleAccordion:function(){this.accordionStatus=!this.accordionStatus,this.accordionStatus?this.updateMaxHeight():this.resetMaxHeight()},resetMaxHeight:function(){this.$refs.collapseContent&&(this.$refs.collapseContent.style.maxHeight="0")},updateMaxHeight:function(){var t=this;this.accordionStatus&&this.hasTags&&this.$nextTick((function(){var content=t.$refs.collapseContent;t.maxHeight=content.scrollHeight+16+"rem",content.style.maxHeight=content.scrollHeight/16+"rem"}))},removeTag:function(t){this.$emit("remove-tag",t)},removeOption:function(option){this.$emit("remove-option",option)}}},m=(n(1618),Object(d.a)(y,(function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"expand"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.hasTags,expression:"hasTags"}],staticClass:"mb-5",style:{maxHeight:t.maxHeight,overflow:"hidden"}},[e("div",{staticClass:"cursor-pointer title",on:{click:t.handleFilterAccordion}},[e("div",{staticClass:"flex flex-row items-center c-text-b1 c-text-gray-400"},[e("p",{staticClass:"flex-1"},[t._v("\n          Filtros selecionados\n        ")]),t._v(" "),e("c-icon",{staticClass:"arrow",attrs:{name:t.arrowName,color:"var(--c-color-gray-400)"}})],1)]),t._v(" "),e("div",{ref:"collapseContent",staticClass:"accordion-content"},[e("transition-group",{staticClass:"flex flex-row flex-wrap",attrs:{name:"pill-scale"}},[t._l(t.tags,(function(n){return e("c-pill",{key:n.id,staticClass:"ui-cursor-pointer ui-normal-case ui-whitespace-no-wrap m-1",attrs:{label:n.label,removable:"","span-class":"text-column-tag ui-mx-2 uppercase"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.removeTag(n)},remove:function(e){return t.removeTag(n)}}})})),t._v(" "),t._l(t.options,(function(option){return e("c-pill",{key:option.id,staticClass:"ui-cursor-pointer ui-normal-case ui-whitespace-no-wrap m-1",attrs:{label:option.label,removable:"","span-class":"text-column-tag ui-mx-2 uppercase"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.removeOption(option)},remove:function(e){return t.removeOption(option)}}})}))],2),t._v(" "),e("div",{staticClass:"pt-4"},[e("c-link",{staticClass:"outline-primary",attrs:{tabindex:"0"},on:{click:t.clearFilters},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.clearFilters.apply(null,arguments)}}},[t._v("\n          Limpar filtros\n        ")])],1)],1)])])}),[],!1,null,"696dc60a",null));function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var x={name:"ControllableSearchFilter",components:{FilterGroup:v,AppliedFilters:m.exports},props:{sections:{type:Array,required:!0},selectedOptions:{type:[Array,Object],default:function(){return{}}},forcedOpenSectionIds:{type:Array,default:function(){return[]}},isSearchable:{type:Boolean,default:!1},isGoalPage:{type:Boolean,default:!1},defaultOpen:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},tags:{type:Array,default:function(){return[]}}},data:function(){return{selectedFilterTags:[],selectedFilterTagsParents:{},currentTags:[]}},computed:{filteredSections:function(){return this.sections.filter((function(section){return"shelf_grouped_by_classif"!==section.type}))}},watch:{selectedOptions:{handler:function(){this.setSelectedFilterTags()},deep:!0,immediate:!0},tags:{handler:function(){this.setSelectedFilterTags()},deep:!0}},methods:{shouldSectionForceOpen:function(t){var e,n;return(null===(e=this.forcedOpenSectionIds)||void 0===e?void 0:e.includes(t))||(null===(n=this.getSelectedsForSectionId(t))||void 0===n?void 0:n.length)>0},setSelectedFilterTags:function(){var t=this,e=[],n={};Object.keys(this.selectedOptions).forEach((function(o){var section={},c=[];isNaN(parseInt(o))?(section=t.sections.find((function(section){return section.id===o})),c=t.selectedOptions[o]):(section=t.sections.find((function(section){return section.id===t.selectedOptions[o].id})),c=t.selectedOptions[o].options),section&&c.forEach((function(option){"object"===Object(r.a)(option)?(e.push(option),n[option.id]=section.id):(e.push(section.options.find((function(t){return t.id===option}))),n[option]=section.id)}))})),this.selectedFilterTags=e,this.selectedFilterTagsParents=n,this.currentTags=this.tags.map((function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t)})),this.$forceUpdate()},getSelectedFilterTagParent:function(t){var e=t.id,n=t.value;return this.selectedFilterTagsParents[e||n]},getSelectedsForSectionId:function(t){return Array.isArray(this.selectedOptions)?this.selectedOptions.find((function(option){return option.id===t}))&&null!==(e=null===(n=this.selectedOptions.find((function(option){return option.id===t})).options)||void 0===n?void 0:n.map((function(option){return option.id})))&&void 0!==e?e:[]:this.selectedOptions[this.selectedOptions.id];var e,n}}},O=x,w=(n(1620),Object(d.a)(O,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-container"},[e("applied-filters",{attrs:{tags:t.currentTags,options:t.selectedFilterTags},on:{"remove-tag":function(e){return t.$emit("remove-tag",e)},"remove-option":function(filter){return t.$emit("remove-filter",filter,t.getSelectedFilterTagParent(filter))},"clear-filters":function(e){return t.$emit("clear-filters")}}}),t._v(" "),t._t("default"),t._v(" "),t._l(t.filteredSections,(function(section,n){return e("filter-group",{key:section.id,attrs:{id:section.id,"data-v-step":"filters-section-".concat(n),title:section.name,options:section.options,text:section.text,"is-loading":section.isLoading,"is-loading-more":section.isLoadingMore,"is-searchable":["classification","goal","cast_shelves","author"].includes(section.type)||t.isSearchable,selected:t.getSelectedsForSectionId(section.id),"should-force-open":t.shouldSectionForceOpen(section.id)||t.defaultOpen,disabled:t.disabled,"is-goal-page":t.isGoalPage},on:{"add-filter":function(filter){return t.$emit("add-filter",filter,section.id)},"remove-filter":function(filter){return t.$emit("remove-filter",filter,section.id)},"toggle-section":function(e){return t.$emit("toggle-section",section.id,e)},"on-change":function(e){return t.$emit("on-change-text-section",section.id,e)},"group-reached-bottom":function(){return t.$emit("group-reached-bottom",section.id)}}})}))],2)}),[],!1,null,"17bf8176",null));e.a=w.exports},1434:function(t,e,n){var content=n(1615);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(31).default)("412a529c",content,!0,{sourceMap:!1})},1435:function(t,e,n){var content=n(1617);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(31).default)("06b214e2",content,!0,{sourceMap:!1})},1436:function(t,e,n){var content=n(1619);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(31).default)("2257bee4",content,!0,{sourceMap:!1})},1437:function(t,e,n){var content=n(1621);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(31).default)("4cd52d6a",content,!0,{sourceMap:!1})},1614:function(t,e,n){"use strict";n(1434)},1615:function(t,e,n){var o=n(30)((function(i){return i[1]}));o.push([t.i,".centralized[data-v-4d3f7f90] {\n  position: absolute;\n  top: 0px;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(var(--c-color-gray-100-rgb), 0.80);\n}\n",""]),o.locals={},t.exports=o},1616:function(t,e,n){"use strict";n(1435)},1617:function(t,e,n){var o=n(30)((function(i){return i[1]}));o.push([t.i,"[data-v-574768b4] .c-search-bar__input {\n  border: 0.125rem solid var(--c-color-gray-300);\n  margin: 4px 0;\n}\n[data-v-574768b4] .c-search-bar__input:focus {\n  border: 0.125rem solid var(--c-color-primary-300);\n}\n[data-v-574768b4] .c-checkbox__label {\n  color: var(--c-color-gray-400);\n  margin: 0.25rem;\n}\n.accordion-options[data-v-574768b4] {\n  max-height: 300px;\n  overflow: auto;\n}\n.controlled-filter-title[data-v-574768b4] {\n  border-bottom: 1px solid var(--c-color-gray-200);\n  padding: 8px 4px;\n}\n.accordion-content[data-v-574768b4] {\n  transition: all 0.4s;\n  overflow: hidden;\n}\n.accordion-content.open[data-v-574768b4] {\n  max-height: 380px;\n}\n.accordion-content.closed[data-v-574768b4] {\n  max-height: 0;\n}\n.checkbox-option-accents[data-v-574768b4] {\n  transition: all 0.3s;\n}\n.checkbox-option-accents[data-v-574768b4]:hover,\n.checkbox-option-accents[data-v-574768b4]:focus {\n  background: color-mix(in oklch, transparent, var(--c-color-primary-100) 10%);\n}\n.selected-options-counter-text[data-v-574768b4] {\n  font-size: 0.75rem;\n  line-height: 0.75rem;\n  font-weight: 400;\n  text-align: center;\n}\n.empty-options[data-v-574768b4] {\n  gap: 8px;\n  margin: 12px;\n  padding: 12px;\n  height: 64px;\n  border: 1px solid var(--c-color-gray-200);\n  border-radius: 8px;\n}\n",""]),o.locals={},t.exports=o},1618:function(t,e,n){"use strict";n(1436)},1619:function(t,e,n){var o=n(30)((function(i){return i[1]}));o.push([t.i,".title[data-v-696dc60a] {\n  color: var(--c-color-gray-400);\n  border-bottom: 1px solid var(--c-color-gray-200);\n  padding: 8px 4px;\n  margin-bottom: 8px;\n}\n.accordion-content[data-v-696dc60a] {\n  transition: max-height 0.5s ease-in-out;\n  overflow: hidden;\n}\n.outline-primary[data-v-696dc60a] {\n  outline-color: var(--c-color-primary-300);\n  outline-width: 1px;\n}\n[data-v-696dc60a] .text-column-tag {\n  display: inline-block;\n  max-width: 240px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font-size: 10px;\n  font-weight: 700;\n  line-height: 20px;\n}\n.expand-enter-active[data-v-696dc60a], .expand-leave-active[data-v-696dc60a] {\n  transition: max-height 0.4s ease-in-out;\n}\n.expand-enter[data-v-696dc60a], .expand-leave-to[data-v-696dc60a] {\n  max-height: 0;\n}\n.pill-scale-enter-active[data-v-696dc60a], .pill-scale-leave-active[data-v-696dc60a] {\n  transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;\n}\n.pill-scale-enter[data-v-696dc60a], .pill-scale-leave-to[data-v-696dc60a] {\n  transform: scale(0.1);\n  opacity: 0;\n}\n",""]),o.locals={},t.exports=o},1620:function(t,e,n){"use strict";n(1437)},1621:function(t,e,n){var o=n(30)((function(i){return i[1]}));o.push([t.i,".search-container[data-v-17bf8176] {\n  display: flex;\n  flex-direction: column;\n  width: 18rem;\n}\n",""]),o.locals={},t.exports=o}}]);